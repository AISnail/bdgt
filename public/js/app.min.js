$(document).on("ready ajaxComplete",function(){$(".moment").not(".processed-ready").each(function(value){var dateFromNow=moment(new Date($(this).text())).fromNow();"Invalid date"!==dateFromNow&&$(this).text(dateFromNow),$(this).addClass("processed-ready")}),$(".money").not(".processed-ready").each(function(value){"-"==$(this).text().charAt(0)?$(this).addClass("negative"):$(this).addClass("positive")})}),$(document).ready(function(){$(".datepicker").datepicker({zIndexOffset:1050,format:"yyyy-mm-dd"}).datepicker("setDate",new Date).datepicker("update")});var Loan=function(amount,interestRate,minimumPayment){this.amount=parseFloat(amount),this.interestRate=parseFloat(interestRate),this.interestRate>1&&(this.interestRate/=100),this.minimumPayment=parseFloat(minimumPayment),this.payment=this.minimumPayment};Loan.prototype.makePayment=function(amount){return this.payment=amount,this.calculate()},Loan.prototype.getPrincipal=function(){return void 0===this.amount||NaN===this.amount?0:this.amount},Loan.prototype.calculate=function(){for(var i=0,principal=this.getPrincipal(),interestPaid=0,date=moment(),currentBalance=principal;currentBalance>0;)if(date.add(1,"M"),currentBalance-=this.payment,currentBalance*=1+this.interestRate,interestPaid+=currentBalance*this.interestRate,i>960||currentBalance>=1/0)return{interest:-1};return{date:date,interest:interestPaid}},Loan.prototype.formatWithCommas=function(num){return num.toString().replace(/(\.\d{2})\d+$/,"$1").replace(/(?=(\d{3})+(?!\d))/g,",")};