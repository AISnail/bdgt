$(document).ready(function(){$(".datepicker").datepicker({zIndexOffset:1050,format:"yyyy-mm-dd"})});var Loan=function(amount,interestRate,minimumPayment){this.amount=amount,this.interestRate=interestRate,this.minimumPayment=minimumPayment,this.payment=minimumPayment};Loan.prototype.makePayment=function(amount){return this.payment=amount,this.calculate()},Loan.prototype.getPrincipal=function(){return void 0===this.amount||NaN===this.amount?0:this.amount},Loan.prototype.calculate=function(){for(var i=0,principal=this.getPrincipal(),interestPaid=0,date=moment(),currentBalance=principal;currentBalance>0;)if(date.add(1,"M"),currentBalance-=this.payment,currentBalance*=1+this.interestRate,additionalInterest=currentBalance*this.interestRate,interestPaid+=additionalInterest,i>960||currentBalance>=1/0)return{interest:-1};return{date:date,interest:interestPaid}},Loan.prototype.formatWithCommas=function(num){return num.toString().replace(/(\.\d{2})\d+$/,"$1").replace(/(?=(\d{3})+(?!\d))/g,",")};